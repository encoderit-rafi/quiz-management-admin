import{r as D,ad as y,j as e,B as w,L as C,ae as L,U as $,af as J,g as U,h as _,ag as G,i as H,k as S,Q as V,ah as K}from"./index-C0O9Q7MJ.js";import{a as X,c as Y}from"./card-DH7LzJZY.js";import{A as Z}from"./app-card-header-with-back-button-NAfeAEHl.js";import{A as ee,a as se,b as te,B as A,c as ne}from"./accordion-Dhh1A59X.js";import{D as Q,c as E,S as M,v as k,a as ie,u as I,C as T}from"./sortable.esm-CvjGp21f.js";import{G as O}from"./grip-vertical-DHgGwv_s.js";import"./index-Drdai_pP.js";const oe=[{id:1,name:"What is the capital of France?",options:[{id:"opt-1-1",label:"London",points:0},{id:"opt-1-2",label:"Berlin",points:0},{id:"opt-1-3",label:"Paris",points:10},{id:"opt-1-4",label:"Madrid",points:0}]},{id:2,name:"Which planet is known as the Red Planet?",options:[{id:"opt-2-1",label:"Mars",points:10},{id:"opt-2-2",label:"Venus",points:0},{id:"opt-2-3",label:"Jupiter",points:0},{id:"opt-2-4",label:"Saturn",points:0}]},{id:3,name:"Who wrote 'Romeo and Juliet'?",options:[{id:"opt-3-1",label:"Charles Dickens",points:0},{id:"opt-3-2",label:"William Shakespeare",points:10},{id:"opt-3-3",label:"Jane Austen",points:0},{id:"opt-3-4",label:"Mark Twain",points:0}]}];function ue(){const[f,g]=D.useState(y),[d,j]=D.useState(oe),b=s=>d.findIndex(t=>t.id===s),z=s=>{const{active:t,over:n}=s;console.log("ðŸ‘‰ ~ handleDragEnd ~ active, over:",t,n),t.id!==n.id&&j(i=>{const o=b(t.id),a=b(n.id);return ie(i,o,a)})};function B({option:s}){const{attributes:t,listeners:n,setNodeRef:i,transform:o,transition:a,isDragging:c}=I({id:s.id}),p={transition:a,transform:T.Transform.toString(o),opacity:c?.5:1};return e.jsxs("div",{ref:i,style:p,className:"flex items-center gap-2 p-2 rounded-md bg-muted/30",children:[e.jsx("button",{type:"button",className:"cursor-grab active:cursor-grabbing touch-none p-1 hover:bg-muted rounded",...t,...n,children:e.jsx(O,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx("span",{className:"text-sm flex-1",children:s.label}),e.jsxs(A,{variant:"outline",className:"font-mono text-xs",children:[s.points," pts"]})]})}function P({question:s,index:t}){const{attributes:n,listeners:i,setNodeRef:o,transform:a,transition:c}=I({id:s.id}),p={transition:c,transform:T.Transform.toString(a)},q=l=>{const{active:v,over:m}=l;!m||v.id===m.id||j(R=>{const N=[...R],r=N.find(u=>u.id===s.id);if(r){const u=r.options.findIndex(h=>h.id===v.id),W=r.options.findIndex(h=>h.id===m.id),x=[...r.options],[F]=x.splice(u,1);x.splice(W,0,F),r.options=x}return N})};return e.jsxs(se,{ref:o,style:p,value:`item-${t}`,className:"px-4 border-b last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 py-4",children:[e.jsx("button",{className:"cursor-grab active:cursor-grabbing touch-none p-1 hover:bg-muted rounded",...n,...i,children:e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(te,{className:"hover:no-underline py-0 flex-1",children:e.jsxs("span",{className:"flex items-center gap-2 text-left",children:[e.jsx("span",{className:"bg-primary/10 text-primary w-6 h-6 rounded-full flex items-center justify-center text-xs shrink-0",children:t+1}),e.jsx("span",{className:"font-medium line-clamp-1",children:s.name})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(A,{variant:"secondary",className:"mr-2",children:[s.options.length," Options"]}),e.jsxs(U,{children:[e.jsx(_,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsxs(H,{align:"end",children:[e.jsx(S,{asChild:!0,children:e.jsxs(C,{to:"/quizzes/$id/questions/$questionID/edit",params:{id:"1",questionID:"1"},children:[e.jsx(V,{}),"Edit"]})}),e.jsxs(S,{variant:"destructive",onClick:()=>{g({type:"delete",title:"Delete Question",description:"Are you sure you want to delete this question?",id:s.id})},children:[e.jsx(K,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]})]}),e.jsx(ne,{className:"pk-4 pb-4",children:e.jsx("div",{className:"pl-8 space-y-2",children:e.jsx("div",{className:"grid gap-2",children:e.jsx(Q,{onDragEnd:q,collisionDetection:E,children:e.jsx(M,{items:s.options,strategy:k,children:s.options.map(l=>e.jsx(B,{option:l},l.id))})})})})})]},t)}return e.jsxs("div",{className:"flex-1 flex flex-col gap-6 overflow-hidden",children:[e.jsxs(X,{className:"flex items-center justify-between gap-4",children:[e.jsx(Z,{title:"Quiz Questions",description:"Manage questions, options, and points for this quiz."}),e.jsx(w,{asChild:!0,children:e.jsxs(C,{to:"/quizzes/$id/questions/create",params:{id:"1"},children:[e.jsx(L,{}),e.jsx($,{children:"Add Question"})]})})]}),e.jsxs(Y,{children:[e.jsx(ee,{type:"multiple",className:"w-full",children:e.jsx(Q,{onDragEnd:z,collisionDetection:E,children:e.jsx(M,{items:d,strategy:k,children:d.map((s,t)=>e.jsx(P,{question:s,index:t}))})})}),e.jsx(J,{open:f.type==="delete",onOpenChange:()=>g(y),onConfirm:()=>{},item_name:f.title,loading:!1})]})]})}export{ue as component};
