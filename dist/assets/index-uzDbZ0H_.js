import{x as w,y as a,z as f,A as x,E as h,F as g,G as t,r as j,j as s,B as b,H as P,L as F,I as A}from"./index-CDJ7DgKs.js";import{u as N,a as S,F as E}from"./field-B7Wg_fYW.js";import{F as m}from"./form-password-input-CvhLg-w6.js";import{A as R,a as v,b as k}from"./app-subtitle-ChuS48SI.js";import"./password-input-DfsXY_sW.js";const y=w({email:a(),token:a(),password:a().min(6,"Password must be at least 6 characters long").max(50,"Password is too long"),password_confirmation:a()}).refine(o=>o.password===o.password_confirmation,{message:"Passwords do not match",path:["password_confirmation"]}),I=()=>{const o=f();return x({mutationKey:["/password/reset"],mutationFn:e=>h.post("/password/reset",e),onSuccess:()=>{t.success("Your password has been reset."),o({to:"/login",search:{code:void 0}})},onError:e=>{g(e)?t.error(e.response?.data?.message||e.message||"Failed to reset password."):t.error("Something went wrong.")}})};function T({email:o,token:e}){const{mutate:n,isPending:l}=I(),d=N({resolver:S(y)}),{control:i,handleSubmit:p,setValue:r}=d;j.useEffect(()=>{o&&e&&(r("email",o),r("token",e))},[o,e,r]);function u(c){console.log("Form submitted:",c),n(c)}return s.jsx("form",{onSubmit:p(u),children:s.jsxs(E,{children:[s.jsx(m,{control:i,name:"password",label:"NewPassword",placeholder:"* * * * *"}),s.jsx(m,{control:i,name:"password",label:"Confirm Password",placeholder:"* * * * *"}),s.jsx(b,{type:"submit",loading:l,className:"w-full",children:"Reset Password"})]})})}function B(){const{email:o="",token:e=""}=P.useSearch();return s.jsxs("div",{className:"max-w-md flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(F,{to:"/",search:{...A},children:s.jsx(R,{className:"size-12"})}),s.jsx(v,{children:"Reset Password"}),s.jsx(k,{children:"Create a new password for your account to regain access."})]}),s.jsx(T,{email:o,token:e})]})}export{B as component};
