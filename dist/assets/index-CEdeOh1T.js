import{o as w,s as a,p as f,q as x,t as h,v as g,w as t,r as j,j as s,B as b,x as P,L as F}from"./index-C0O9Q7MJ.js";import{u as A,a as N,F as S}from"./field-wCSYO7Ng.js";import{F as m}from"./form-password-input-DUBPDGZy.js";import{D as v,A as R,a as E,b as k}from"./consts-CqA-1tLx.js";import"./password-input-BRREzLrV.js";const T=w({email:a(),token:a(),password:a().min(6,"Password must be at least 6 characters long").max(50,"Password is too long"),password_confirmation:a()}).refine(e=>e.password===e.password_confirmation,{message:"Passwords do not match",path:["password_confirmation"]}),_=()=>{const e=f();return x({mutationKey:["/password/reset"],mutationFn:o=>h.post("/password/reset",o),onSuccess:()=>{t.success("Your password has been reset."),e({to:"/login",search:{code:void 0}})},onError:o=>{g(o)?t.error(o.response?.data?.message||o.message||"Failed to reset password."):t.error("Something went wrong.")}})};function y({email:e,token:o}){const{mutate:n,isPending:l}=_(),d=A({resolver:N(T)}),{control:i,handleSubmit:p,setValue:r}=d;j.useEffect(()=>{e&&o&&(r("email",e),r("token",o))},[e,o,r]);function u(c){console.log("Form submitted:",c),n(c)}return s.jsx("form",{onSubmit:p(u),children:s.jsxs(S,{children:[s.jsx(m,{control:i,name:"password",label:"NewPassword",placeholder:"* * * * *"}),s.jsx(m,{control:i,name:"password",label:"Confirm Password",placeholder:"* * * * *"}),s.jsx(b,{type:"submit",loading:l,className:"w-full",children:"Reset Password"})]})})}function G(){const{email:e="",token:o=""}=P.useSearch();return s.jsxs("div",{className:"max-w-md flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(F,{to:"/",search:{...v},children:s.jsx(R,{className:"size-12"})}),s.jsx(E,{children:"Reset Password"}),s.jsx(k,{children:"Create a new password for your account to regain access."})]}),s.jsx(y,{email:e,token:o})]})}export{G as component};
